\chapter{Problema de Empacotamento}\label{ch:problema-de-empacotamento}

O problema de empacotamento, é um problema de otimização de difícil resolução.
Seu objetivo é simples, colocar peças em um espaço $N$-dimensional, na \autoref{fig:packing-example} é possível ver representações para os casos 1D, 2D e 3D.
Tanto as peças quanto o espaço, podem ser de formato regular (convexo) ou não (côncavo).
Pensando no caso 2D, triângulos, retângulos, círculos e outros polígonos convexos são considerados regulares, enquanto estrelas e outros polígonos côncavos são irregulares.

\input{utils/figures/packing_example}

Outra forma de definir se uma peça é regular ou não, é o número de parâmetros necessários para representá-la.
Se forem preciso três ou mais é irregular, caso contrário, regular \cite{aprendizado-reforco}.
A \autoref{fig:pieces-example} mostra alguns exemplos de ambos tipos de peças.

O foco deste trabalho será em problemas de empacotamento 2D de peças e objetos retangulares ortogonais, sem qualquer variante (\autoref{sec:variantes}).

\input{utils/figures/pieces_example}


\section{Definição}\label{sec:definicao}

De acordo com \cite{2DPackLib}, dado uma caixa retangular $\mathcal{B} = (W, H)$ de comprimento $W \in \mathbb{Z}_+$ e altura $H \in \mathbb{Z}_+$ e um conjunto $\mathcal{I}$ de itens também retangulares, onde cada item $i \in \mathcal{I}$ com comprimento $w_i \in \mathbb{Z}_+, w_i \le W$ e altura $h_i \in \mathbb{Z}_+, h_i \le H$.
Um empacotamento $\mathcal{I}' \subseteq \mathcal{I}$ em $\mathcal{B}$ pode ser descrito como uma função $\mathcal{F}: \mathcal{I}' \to \mathbb{Z}_+^2$ que mapeie cada item $i \in \mathcal{I}'$ para um par de coordenadas $\mathcal{F}(i) = (x_i, y_i)$, de forma

\begin{align}
    x_i \in \{0, \dots, W - w_i\}, y_i \in \{0, \dots, H - h_i\} (i \in \mathcal{I}') \label{eq:1} \\
    [x_i, x_i + w_i) \cap [x_j, x_j + w_j) = \emptyset \text{ ou } [y_i, y_i + h_i) \cap [y_j, y_j + h_j) = \emptyset (i, j \in \mathcal{I}', i \neq j) \label{eq:2}.
\end{align}

Nessa forma de representação a caixa está posicionada no plano cartesiano, com seu canto inferior esquerdo na origem.
Já as coordenadas $\mathcal{F}(i) = (x_i, y_i)$ representam a posição em que o canto inferior esquerdo da peça será alocado.
A Restrição \ref{eq:1} garante que cada item deve estar inteiramente dentro da caixa, enquanto a Restrição \ref{eq:2} impede sobreposição entre peças.
Ambas restrições indicam uma orientação fixa, ou seja, peças não podem ser rotacionadas.


\section{Classificação}\label{sec:classificacao}
% TODO: adicionar imagens para cada classe

Por existirem diferentes objetivos na solução de um problema de empacotamento foram criadas algumas classificações.
Algumas delas (as principais) são mostradas em \cite{exact-solution-techniques}.

O objetivo do \textbf{Empacotamento 2D em Faixa} é encontrar um empacotamento de altura mínima para um dado conjunto de itens em uma caixa com comprimento fixo.

No \textbf{Empacotamento 2D da Mochila} deve-se encontrar $\mathcal{I} \subseteq \mathcal{I}'$ que maximize o valor de $\mathcal{B}$.
Geralmente o valor é dado pela área de caixa ocupada pelos itens, dessa forma, outra interpretação do problema seria minimizar a area desperdiçada (vazia).

Já o \textbf{Empacotamento 2D em Caixas} envolve encontrar uma solução que minimize o número de caixas necessárias para empacotar todos os itens.
As caixas podem possuir diferentes tamanhos, mas a maioria dos problemas lida com as mesmas dimensões.

Por fim, no \textbf{Empacotamento 2D Ortogonal} busca-se uma solução, caso exista, para empacotar \textbf{todos} os itens na caixa.

Todos os problemas descritos são NP-difícil, com exceção do Ortogonal, sendo NP-completo\cite{2DPackLib}.


\section{Variantes}\label{sec:variantes}


Variantes são pequenas alterações no escopo do problema, também podem ser vistas como restrições ou relaxamento.
Existem quatro mais comuns \cite{2DPackLib}, os quais são descritos a seguir.

\textbf{Corte guilhotinado} consiste em cortar a caixa de forma paralela a um de seus lados recursivamente, é útil na resolução de problemas de corte (problemas de empacotamento podem ser reduzidos para essa categoria e vice-versa).
\textbf{Rotações ortogonais} são um modo de relaxar o problema, permitindo rotações de 90 graus para os itens a serem alocados.

\textbf{Restrições de carga e descarga} implicam que algumas peças \textbf{devem} ser posicionadas em dada posição, usando como exemplo um caminhão de entregas, visa evitar situações onde um produto precisa ser descarregado para se ter acesso a um item mais a fundo e então carregar novamente o primeiro item.
Existem varientes aplicáveis somente a algumas categorias do problema, é o caso de \textbf{caixas de tamanho variável}  que pode ser unida ao \textbf{Empacotamento 2D em Caixas} e define que caixas não têm de ter as mesmas dimensões.


\section{Bottom-Left}\label{sec:bottom-left}
% TODO: adicionar figura com exemplo

Como descrito na \autoref{sec:classificacao}, a maioria das classes do problema são NP-difíceis.
Isso torna métodos de soluções exatos, os quais buscam pela solução ótima, extremamente custosos em tempo e recursos computacionais em instâncias de porte moderado, muitas vezes sendo inviável por falta de algum desses dois motivos.
Consequentemente a literatura é dominada por abordagens que usem heurísticas e meta-heurísticas, sendo a \textit{bottom-left} uma das principais estratégias de solução e será usada no estudo deste trabalho.

Sua premissa é simples, dado uma fila como entrada, enquanto ela não estiver vazia, basta retirar o primeiro item dela e alocar no canto mais a baixo e a esquerda quanto for possível \cite{aprendizado-reforco}, sem sobreposições entre peças (\autoref{sec:definicao}).
Caso não exista uma posição válida, a peça é desconsiderada e passa-se para próxima da fila.
